box: debian
build:
  steps:
    - arjen/hugo-build@1.12.1:
        version: "0.16"
        theme: casper
        flags: --buildDrafts=false

deploy:
  steps:
    - install-packages:
        packages: ssh-client
    - add-to-known_hosts:
        hostname: 133.242.161.107
    - mktemp:
        envvar: PRIVATEKEY_PATH
    - create-file:
        name: write key
        filename: $PRIVATEKEY_PATH
        content: $VPS_KEY_PRIVATE
        overwrite: true
    - script:
        name: show data
        code: ls -la public
    - script:
        name: transfer data
        code: scp -i $PRIVATEKEY_PATH -P 10024 -o StrictHostKeyChecking=no -o UserKnownHostsFile=no -r ./public wercker@133.242.161.107:~/hugo
