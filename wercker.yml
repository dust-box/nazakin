box: wercker/default
build:
  steps:
    - arjen/hugo-build@1.12.1
        version: "0.16"
        theme: casper
        flags: --buildDrafts=false

deploy:
  steps:
    - add-to-known_hosts:
        hostname: nazakin.info
    - mktemp:
        envvar: PRIVATEKEY_PATH
    - create-file:
        name: write key
        filename: $PRIVATEKEY_PATH
        content: $VPS_KET_PRIVATE
        overwrite: true
    - script:
        name: show data
        code: ls -la public
    - script:
        name: transfer data
        code: scp -i $PRIVATEKEY_PATH -P 22 -o StrictHostKeyChecking=no -o UserKnownHostsFile=no -r ./public wercker@nazakin.info:~/hugo
